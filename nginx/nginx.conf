worker_processes auto;



http {

    upstream front-end {
        server front-end:3000;
    }

    upstream back-end {
        server back-end:5000;
    }

	server {
			listen     80;

			location / {
				# здесь нужно указать локальный адрес вашего
				# сайта. У меня он в Docker'e на порту 3000. У
				# вас может быть адрес в духе http://127.0.0.1:ПОРТ
				proxy_pass http://172.17.0.1:3000;
			}

			# URL certbot'a, где он будет слушать входящие
			# подключения во время выдачи SSL
			location /.well-known {
					# адрес certbot'a в Docker Compose на Linux
					proxy_pass http://172.17.0.1:6000;
			}
	}

# 	server {
#         listen 443 ssl;
#         server_name tbaza58.ru;
#         ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
#         ssl_ciphers HIGH:!aNULL:!MD5;
#         location / {
#             proxy_pass http://front-end;
#         }
#         location /sockjs-node {
#             proxy_pass http://front-end;
#             proxy_http_version 1.1;
#             proxy_set_header Upgrade $http_upgrade;
#             proxy_set_header Connection "Upgrade";
#         }
#         location /api {
#             rewrite /back-end/(.*) /$1 break;
#             proxy_pass http://back-end;
#         }
#     }
}



